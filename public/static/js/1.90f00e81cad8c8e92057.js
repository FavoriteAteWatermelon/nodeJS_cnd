webpackJsonp([1],{"19Sw":function(t,e){},"4dVL":function(t,e){t.exports={name:"vue-img-cutter",version:"2.1.10",description:"A image crop plug-in for Vue,you can use it to rotate、zoom images and cut any size",author:"acccccccb <tabzhang@foxmail.com>",private:!1,scripts:{dev:"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js",start:"npm run dev",build:"node build/build.js"},dependencies:{vue:"^2.5.2"},devDependencies:{autoprefixer:"^7.1.2","babel-core":"^6.22.1","babel-helper-vue-jsx-merge-props":"^2.0.3","babel-loader":"^7.1.1","babel-plugin-syntax-jsx":"^6.18.0","babel-plugin-transform-runtime":"^6.22.0","babel-plugin-transform-vue-jsx":"^3.5.0","babel-preset-env":"^1.3.2","babel-preset-stage-2":"^6.22.0",chalk:"^2.0.1","copy-webpack-plugin":"^4.0.1","css-loader":"^0.28.0","extract-text-webpack-plugin":"^3.0.0","file-loader":"^1.1.4","friendly-errors-webpack-plugin":"^1.6.1","html-webpack-plugin":"^2.30.1","js-yaml":"^3.13.1",lodash:"^4.17.15",mem:"^6.0.0","mixin-deep":"^2.0.1","node-notifier":"^5.1.2","optimize-css-assets-webpack-plugin":"^3.2.0",ora:"^1.2.0",portfinder:"^1.0.13","postcss-import":"^11.0.0","postcss-loader":"^2.0.8","postcss-url":"^7.2.1",rimraf:"^2.6.0",semver:"^5.3.0","set-value":"^3.0.1",shelljs:"^0.7.6","uglifyjs-webpack-plugin":"^1.1.1","url-loader":"^0.5.8","vue-loader":"^13.3.0","vue-style-loader":"^3.0.1","vue-template-compiler":"^2.5.2",webpack:"^3.6.0","webpack-bundle-analyzer":"^2.13.1","webpack-dev-server":"^2.11.5","webpack-merge":"^4.1.0"},engines:{node:">= 6.0.0",npm:">= 3.0.0"},browserslist:["> 1%","last 2 versions","not ie <= 8"],main:"./src/index.js",repository:{type:"git",url:"git+https://github.com/acccccccb/vue-img-cutter.git"},keywords:["image","crop","cutter","vue","裁剪"],license:"Apache2.0",bugs:{url:"https://github.com/acccccccb/vue-img-cutter/issues"},homepage:"https://ihtmlcss.com/demo/dist/#/croptool",__npminstall_done:"Wed Oct 14 2020 15:02:46 GMT+0800 (GMT+08:00)",_from:"vue-img-cutter@2.1.10",_resolved:"https://registry.npm.taobao.org/vue-img-cutter/download/vue-img-cutter-2.1.10.tgz"}},"9Vkk":function(t,e,o){"use strict";var i=o("4YfN"),a=o.n(i),s=o("hRKE"),r=o.n(s),n=o("4dVL"),l=o.n(n),h={name:"ImgCutter",props:{crossOrigin:{type:Boolean,default:!1,required:!1},crossOriginHeader:{type:String,default:"*",required:!1},label:{type:String,default:"选择图片",required:!1},isModal:{type:Boolean,default:!0,required:!1},lockScroll:{type:Boolean,default:!0,required:!1},showChooseBtn:{type:Boolean,default:!0,required:!1},boxWidth:{type:Number,default:800,required:!1},boxHeight:{type:Number,default:400,required:!1},cutWidth:{type:Number,default:200,required:!1},cutHeight:{type:Number,default:200,required:!1},rate:{type:String,default:null,required:!1},tool:{type:Boolean,default:!0,required:!1},toolBgc:{type:String,default:"#fff",required:!1},sizeChange:{type:Boolean,default:!0,required:!1},originalGraph:{type:Boolean,default:!1,required:!1},moveAble:{type:Boolean,default:!0,required:!1},CuttingOriginal:{type:Boolean,default:!1,required:!1},WatermarkText:{type:String,default:"",required:!1},WatermarkTextFont:{type:String,default:"12px Sans-serif",required:!1},WatermarkTextColor:{type:String,default:"#fff",required:!1},WatermarkTextX:{type:Number,default:.95,required:!1},WatermarkTextY:{type:Number,default:.95,required:!1},smallToUpload:{type:Boolean,default:!1,required:!1},saveCutPosition:{type:Boolean,default:!1,required:!1},scaleAble:{type:Boolean,default:!0,required:!1},DoNotDisplayCopyright:{type:Boolean,default:!1,required:!1}},model:["label","boxWidth","boxHeight","rate","tool","DoNotDisplayCopyright"],data:function(){return{version:"",visible:!1,fileName:"",cutImageObj:null,onPrintImgTimmer:null,toolBoxPosition:{x:0,y:0},drawImg:{img:null,sx:0,sy:0,swidth:0,sheight:0,x:0,y:0,width:0,height:0},toolBox:{disable:!0,width:this.boxWidth/2,height:this.boxHeight/2,x:0,y:0,boxMove:{start:{x:0,y:0},moveTo:{x:0,y:0}}},dropImg:{active:!1,pageX:0,pageY:0,params:{}},rotateImg:{angle:0},rotateControl:{active:!1,start:{x:0,y:0},position:100},scaleImg:{rate:0,params:{}},controlBox:{disable:!0,btnName:"",start:{x:0,y:0,width:0,height:0}},selectBox:!1,selectBoxColor:"rgba(0,0,0,0.6)",isFlipHorizontal:!1,isFlipVertically:!1}},mounted:function(){var t=this;this.version=l.a.version,!1===this.isModal&&(this.visible=!0,this.$nextTick(function(){t.$refs.toolBox.onmousewheel=t.scaleImgWheel,t.$refs.toolBox.addEventListener("DOMMouseScroll",t.scaleImgWheel)}))},methods:{handleOpen:function(t){var e=this,o=this,i=function(t){if(o.$refs.toolBox.onmousewheel=e.scaleImgWheel,o.$refs.toolBox.addEventListener("DOMMouseScroll",e.scaleImgWheel),!0===o.isModal){!0===o.lockScroll&&(document.body.style.overflowY="hidden");var i=o.$refs.dialogMainModalRef.offsetHeight+200,a=window.innerHeight,s=o.$refs.mask;s.style.overflowY=i>a?"scroll":"hidden"}t&&"function"==typeof t&&t()};if(t&&"object"==(void 0===t?"undefined":r()(t))&&t.src){if(!t.name)throw new Error("传入参数必须包含：src,name");var a=new Image;!0===this.crossOrigin&&(a.crossOrigin=this.crossOriginHeader),a.name=t.name,a.style.position="fixed",a.style.top=-5e3,a.style.opacity=0,a.onerror=function(t){console.error("图片加载失败"),o.$emit("error",{event:t,msg:"图片加载失败"}),o.clearCutImageObj()},a.onload=function(){if(!0!==a.complete)throw new Error("图片加载失败");o.visible=!0,o.$nextTick(function(){i(function(){o.importImgToCanv(a)})})},a.src=t.src,this.cutImageObj=a,document.body.appendChild(a),this.$emit("onChooseImg",t)}else o.visible=!0,o.$nextTick(function(){i()})},handleClose:function(){var t=this;this.clearAll(),!0===this.isModal&&(!0===this.lockScroll&&(document.body.style.overflowY="scroll"),this.$nextTick(function(){t.visible=!1}))},chooseImg:function(){this.$refs.inputFile.click()},importImgToCanv:function(t){this.fileName=t.name;var e=t.height,o=t.width,i=this.boxWidth,s=this.boxHeight,r=void 0,n=a()({},this.drawImg);n.img=t,this.scaleImg.rate=o/e,e<s&&o<i?(r=1,n.x=(i-o)/2,n.y=(s-e)/2):o/e<=i/s?(r=s/e,n.x=(i-o*r)/2):(r=i/o,n.y=(s-e*r)/2),n.swidth=o,n.sheight=e,n.width=o*r,n.height=e*r,n.x=(i-n.width)/2,n.y=(s-n.height)/2,this.$set(this,"drawImg",n),this.printImg(),this.putToolBox()},putImgToCanv:function(t){var e=this,o=void 0;if(!t.target.files)return console.error("IE9及以下需要自己传入image对象"),!1;if(o=t.target.files[0]||null){this.fileName=o.name;var i=new FileReader;new Image,i.readAsDataURL(o),i.onload=function(t){var s=t.target.result,r=document.createElement("img");r.src=s;var n=setInterval(function(){if(2==i.readyState){if(clearInterval(n),!e.sizeChange&&e.smallToUpload&&r.width<=e.cutWidth&&r.height<=e.cutHeight)return e.handleClose(),void e.$emit("cutDown",{filename:o.name,file:o});var t=r.height,s=r.width,l=e.boxWidth,h=e.boxHeight,d=void 0,c=a()({},e.drawImg);c.img=r,e.scaleImg.rate=s/t,t<h&&s<l?(d=1,c.x=(l-s)/2,c.y=(h-t)/2):s/t<=l/h?(d=h/t,c.x=(l-s*d)/2):(d=l/s,c.y=(h-t*d)/2),c.swidth=s,c.sheight=t,c.width=s*d,c.height=t*d,c.x=(l-c.width)/2,c.y=(h-c.height)/2,e.$set(e,"drawImg",c),e.printImg(),e.putToolBox()}},200)},this.$emit("onChooseImg",o)}},putToolBox:function(){this.toolBox.width!==this.boxWidth/2&&this.toolBox.height!==this.boxHeight/2&&!1!==this.saveCutPosition||(this.toolBox.width=this.cutWidth>this.boxWidth?this.boxWidth:this.cutWidth,this.toolBox.height=this.cutHeight>this.boxHeight?this.boxHeight:this.cutHeight),(0===this.toolBox.x&&0===this.toolBox.y||!1===this.saveCutPosition)&&(this.toolBox.x=this.boxWidth/2-this.toolBox.width/2,this.toolBox.y=this.boxHeight/2-this.toolBox.height/2),this.drawControlBox(this.toolBox.width,this.toolBox.height,this.toolBox.x,this.toolBox.y)},isSupportFileApi:function(){return!!(window.File&&window.FileList&&window.FileReader&&window.Blob&&-1===navigator.userAgent.indexOf("Edge")&&-1===navigator.userAgent.indexOf("MSIE")&&-1===navigator.userAgent.indexOf("Trident"))},dataURLtoFile:function(t,e){for(var o=t.split(","),i=o[0].match(/:(.*?);/)[1],a=atob(o[1]),s=a.length,r=new Uint8Array(s);s--;)r[s]=a.charCodeAt(s);return this.isSupportFileApi()?new File([r],e,{type:i}):"不支持File对象"},clearAll:function(){var t=this.$refs.canvas;t.getContext("2d").clearRect(0,0,t.width,t.height);var e=this.$refs.canvasSelectBox;e.getContext("2d").clearRect(0,0,e.width,e.height);var o=this.drawImg.sx,i=this.drawImg.sy;this.drawImg={img:null,sx:o,sy:i,swidth:0,sheight:0,x:0,y:0,width:0,height:0},this.isFlipHorizontal=!1,this.isFlipVertically=!1,this.$refs.inputFile.value="",this.rotateImg.angle=0,this.drawImg.img=null,this.turnReset(),this.clearCutImageObj(),this.$emit("onClearAll")},clearCutImageObj:function(){null!==this.cutImageObj&&void 0!==this.cutImageObj&&("function"==typeof this.cutImageObj.remove?this.cutImageObj.remove():this.cutImageObj.removeNode()),this.cutImageObj=null},drawControlBox:function(t,e,o,i){var a=this;t>this.boxWidth&&(t=this.boxWidth),e>this.boxHeight&&(e=this.boxHeight),o<0&&(o=0),i<0&&(i=0);var s=this.$refs.toolBoxControl,r=this.$refs.canvasSelectBox,n=r.getContext("2d");n.fillStyle=this.selectBoxColor,n.clearRect(0,0,r.width,r.height),n.fillRect(0,0,r.width,r.height);var l=void 0,h=void 0;if(this.rate&&""!==this.rate){var d=this.rate.split(":")[0]/this.rate.split(":")[1];d>=1?(l=t,h=t/d):(l=e*d,h=e)}else l=t,h=e;this.toolBox.width=l,this.toolBox.height=h,s.style.width=Math.abs(l)+"px",s.style.height=Math.abs(h)+"px",this.toolBox.boxMove.moveTo.x=o,this.toolBox.boxMove.moveTo.y=i,l<0&&(o+=l),h<0&&(i+=h),o+this.toolBox.width>this.boxWidth&&(o=this.boxWidth-this.toolBox.width),o<0&&(o=0),i+this.toolBox.height>this.boxHeight&&(i=this.boxHeight-this.toolBox.height),i<0&&(i=0),this.toolBoxPosition.x=o,this.toolBoxPosition.y=i,s.style.left=o+"px",s.style.top=i+"px",n.clearRect(o,i,Math.abs(l),Math.abs(h)),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout(function(){a.cropPicture(!0)},100)},resetToolBox:function(){this.toolBox.width<0&&(this.toolBox.boxMove.moveTo.x=this.toolBox.x-this.toolBox.width),this.toolBox.height<0&&(this.toolBox.boxMove.moveTo.y=this.toolBox.y-this.toolBox.height),this.toolBox.width=Math.abs(this.toolBox.width),this.toolBox.height=Math.abs(this.toolBox.height)},toolBoxMouseDown:function(t){var e=this.$refs.toolBoxControl;this.toolBox.x=parseInt(e.style.left.split("px")[0]),this.toolBox.y=parseInt(e.style.top.split("px")[0]),this.toolBox.disable=!1,this.dropImg.active=!1,this.toolBox.boxMove.start={x:t.pageX,y:t.pageY}},toolBoxMouseMove:function(t){if(this.dropImg.active&&this.dropImgMove(t),!1===this.toolBox.disable&&!0===this.moveAble){var e=t.pageX-this.toolBox.boxMove.start.x,o=t.pageY-this.toolBox.boxMove.start.y,i=this.toolBox.x+e,a=this.toolBox.y+o;this.drawControlBox(this.toolBox.width,this.toolBox.height,i,a)}},toolBoxMouseLeave:function(){var t=this;this.toolBox.disable=!0,this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout(function(){t.cropPicture(!0)},100),this.resetToolBox()},toolBoxMouseUp:function(t){this.toolBox.x=parseInt(this.toolBoxPosition.x),this.toolBox.y=parseInt(this.toolBoxPosition.y),this.toolBox.disable=!0,this.dropImg.active=!1,this.resetToolBox()},printImg:function(){var t=this;if(this.drawImg.img){var e=this.$refs.canvas,o=e.getContext("2d");o.font="18px bold 黑体",o.fillStyle="#ff0",o.textAlign="center",o.textBaseline="middle",o.save(),o.clearRect(0,0,e.width,e.height),o.translate(this.drawImg.x+this.drawImg.width/2,this.drawImg.y+this.drawImg.height/2),o.rotate(this.rotateImg.angle*Math.PI/180),o.translate(-(this.drawImg.x+this.drawImg.width/2),-(this.drawImg.y+this.drawImg.height/2)),o.translate(this.drawImg.x,this.drawImg.y),o.scale(this.isFlipHorizontal?-1:1,this.isFlipVertically?-1:1),o.drawImage(this.drawImg.img,this.drawImg.sx,this.drawImg.sy,this.drawImg.swidth,this.drawImg.sheight,this.isFlipHorizontal?-this.drawImg.width:0,this.isFlipVertically?-this.drawImg.height:0,this.drawImg.width,this.drawImg.height),o.translate(-this.drawImg.x,this.drawImg.y),o.restore(),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout(function(){t.cropPicture(!0)},100)}},dropImgOn:function(t){this.dropImg.active=!0,this.dropImg.params=a()({},this.drawImg),this.dropImg.pageX=t.pageX,this.dropImg.pageY=t.pageY},dropImgOff:function(){var t=this;this.dropImg.active=!1,this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout(function(){t.cropPicture(!0)},100)},dropImgMove:function(t){if(this.dropImg.active&&this.drawImg.img){var e=a()({},this.drawImg);e.x=this.dropImg.params.x-(this.dropImg.pageX-t.pageX),e.y=this.dropImg.params.y-(this.dropImg.pageY-t.pageY),this.$set(this,"drawImg",e),this.printImg(),t.stopPropagation()}},scaleReset:function(){this.drawImg.width=this.drawImg.swidth,this.drawImg.height=this.drawImg.sheight,this.printImg()},scaleImgWheel:function(t){var e=this;if(this.drawImg.img&&!0===this.scaleAble){var o=void 0,i=t||window.event;i.wheelDelta?o=-i.wheelDelta/40:i.detail&&(o=i.detail);this.drawImg.x=this.drawImg.width-9*o>50?this.drawImg.x+3*o:this.drawImg.x,this.drawImg.y=this.drawImg.width-9*o>50?this.drawImg.y+3*o:this.drawImg.y,this.drawImg.width=this.drawImg.width-9*o>50?this.drawImg.width-9*o:50,this.drawImg.height=this.drawImg.width/this.scaleImg.rate,this.printImg(),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout(function(){e.cropPicture(!0)},100)}return t.preventDefault(),t.returnValue=!1,!1},flipHorizontal:function(){this.drawImg.img&&(0==this.isFlipHorizontal?this.isFlipHorizontal=!0:this.isFlipHorizontal=!1,this.printImg())},flipVertically:function(){this.drawImg.img&&(0==this.isFlipVertically?this.isFlipVertically=!0:this.isFlipVertically=!1,this.printImg())},turnImg:function(t){var e=this.rotateImg.angle+t;e>=-180&&e<=180&&(this.rotateImg.angle=e,this.rotateControl.position=e/180*100+100,this.printImg("rotate"))},turnReset:function(){this.rotateImg.angle=0,this.rotateControl.position=100,this.printImg("rotate")},controlBtnMouseDown:function(t,e){this.controlBox.disable=!1,this.controlBox.btnName=e,this.controlBox.start.x=t.clientX,this.controlBox.start.y=t.clientY,this.controlBox.start.width=this.toolBox.width,this.controlBox.start.height=this.toolBox.height,t.stopPropagation()},controlBtnMouseUp:function(t){this.controlBox.disable=!0,this.dropImgOff(),this.resetToolBox(),this.toolBoxMouseUp(),t.stopPropagation()},controlBtnMouseMove:function(t){if(!1===this.controlBox.disable){var e=t.clientX-this.controlBox.start.x,o=t.clientY-this.controlBox.start.y,i=void 0,a=void 0;"leftUp"==this.controlBox.btnName&&(i=this.toolBox.x+e,a=this.toolBox.y+o,this.toolBox.width=this.controlBox.start.width-e,this.toolBox.height=this.controlBox.start.height-o),"rightUp"==this.controlBox.btnName&&(i=this.toolBox.x,a=this.toolBox.y+o,this.toolBox.width=this.controlBox.start.width+e,this.toolBox.height=this.controlBox.start.height-o),"rightDown"==this.controlBox.btnName&&(i=this.toolBox.x,a=this.toolBox.y,this.toolBox.width=this.controlBox.start.width+e,this.toolBox.height=this.controlBox.start.height+o),"leftDown"==this.controlBox.btnName&&(i=this.toolBox.x+e,a=this.toolBox.y,this.toolBox.width=this.controlBox.start.width-e,this.toolBox.height=this.controlBox.start.height+o),"topCenter"==this.controlBox.btnName&&(i=this.toolBox.x,a=this.toolBox.y+o,this.toolBox.width=this.controlBox.start.width,this.toolBox.height=this.controlBox.start.height-o),"downCenter"==this.controlBox.btnName&&(i=this.toolBox.x,a=this.toolBox.y,this.toolBox.width=this.controlBox.start.width,this.toolBox.height=this.controlBox.start.height+o),"leftCenter"==this.controlBox.btnName&&(i=this.toolBox.x+e,a=this.toolBox.y,this.toolBox.width=this.controlBox.start.width-e,this.toolBox.height=this.controlBox.start.height),"rightCenter"==this.controlBox.btnName&&(i=this.toolBox.x,a=this.toolBox.y,this.toolBox.width=this.controlBox.start.width+e,this.toolBox.height=this.controlBox.start.height),this.drawControlBox(this.toolBox.width,this.toolBox.height,i,a)}t.stopPropagation()},cropPicture:function(t){var e=this;if(this.drawImg.img){var o=this.$refs.canvas;if(this.WatermarkText&&!t){var i=o.getContext("2d");i.font=this.WatermarkTextFont,i.fillStyle=this.WatermarkTextColor,i.textAlign="right",i.textBaseline="bottom",i.fillText(this.WatermarkText,this.toolBox.x+this.toolBox.width*this.WatermarkTextX,this.toolBox.y+this.toolBox.height*this.WatermarkTextY)}var a=new Image;!0===this.crossOrigin&&(a.crossOrigin=this.crossOriginHeader),a.src=o.toDataURL(),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,i){window.atob?setTimeout(function(){for(var a=atob(o.toDataURL(e,i).split(",")[1]),s=a.length,r=new Uint8Array(s),n=0;n<s;n++)r[n]=a.charCodeAt(n);t(new Blob([r],{type:e||"image/png"}))},200):t(!1,{type:"image/png"})}}),o.toBlob(function(o){if(o){var i=new FileReader;i.readAsDataURL(o),i.onload=function(){var o=setInterval(function(){if(2==i.readyState){clearInterval(o);var s=document.createElement("canvas"),r=s.getContext("2d");if(1==e.originalGraph){var n=e.drawImg.width/e.drawImg.swidth,l=e.toolBox.width/n,h=e.toolBox.height/n;s.width=l,s.height=h;var d=(e.toolBox.x-e.drawImg.x)/n,c=(e.toolBox.y-e.drawImg.y)/n,g=e.drawImg.swidth,m=e.drawImg.sheight;r.translate(-d,-c),r.drawImage(e.drawImg.img,0,0,g,m)}else{s.width=e.toolBox.width,s.height=e.toolBox.height;var u=e.toolBox;if(e.rate){var p=e.rate.split(":")[0]/e.rate.split(":")[1];e.rate.split(":")[0]>=e.rate.split(":")[1]?r.drawImage(a,u.x,u.y,u.width,u.width*p,0,0,u.width,u.width*p):r.drawImage(a,u.x,u.y,u.width,u.width/p,0,0,u.width,u.width/p)}else r.drawImage(a,u.x,u.y,u.width,u.height,0,0,u.width,u.height)}s.toBlob(function(o){t?e.$emit("onPrintImg",{fileName:e.fileName,blob:o,file:e.dataURLtoFile(s.toDataURL(),e.fileName),dataURL:s.toDataURL()}):(e.handleClose(),e.$emit("cutDown",{fileName:e.fileName,blob:o,file:e.dataURLtoFile(s.toDataURL(),e.fileName),dataURL:s.toDataURL()}))},"image/jpeg",.95)}},200)}}else{var s=document.createElement("canvas");s.width=e.toolBox.width,s.height=e.toolBox.height;var r=s.getContext("2d"),n=e.toolBox;if(e.rate){var l=e.rate.split(":")[0]/e.rate.split(":")[1];r.drawImage(a,n.x,n.y,n.width,n.width*l,0,0,n.width,n.width*l)}else r.drawImage(a,n.x,n.y,n.width,n.height,0,0,n.width,n.height);t?e.$emit("onPrintImg",{fileName:e.fileName,dataURL:s.toDataURL()}):(e.handleClose(),e.$emit("cutDown",{fileName:e.fileName,dataURL:s.toDataURL()}))}})}else t||(console.warn("No picture selected"),e.$emit("error",{err:1,msg:"No picture selected"}))},scrollBarControlMove:function(t){if(this.rotateControl.active){var e=t.pageX-this.rotateControl.start.x,o=this.rotateControl.start.position+e;o<=0&&(o=0),o>=200&&(o=200),this.rotateControl.position=o,this.rotateImg.angle=(o-100)/100*180,this.printImg()}},scrollBarControlOn:function(t){this.rotateControl.active=!0,this.rotateControl.start.x=t.pageX,this.rotateControl.start.y=t.pageY,this.rotateControl.start.position=this.rotateControl.position},scrollBarControlOff:function(){this.rotateControl.active=!1}}},d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[!0===t.showChooseBtn&&!0===t.isModal?o("div",{on:{click:t.handleOpen}},[t._t("openImgCutter"),t._v(" "),t._t("open")],2):t._e(),t._v(" "),t.$slots.openImgCutter||t.$slots.open||!0!==t.isModal?t._e():o("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.handleOpen}},[t._v(t._s(t.label))]),t._v(" "),o("transition",{attrs:{name:"fade"}},[t.visible?o("div",{ref:"mask",class:!0===t.isModal?"mask vue-img-cutter":""},[t.visible?o("div",{class:!0===t.isModal?"dialogBoxModal":"dialogBox"},[o("transition",{attrs:{name:"fade","enter-class":"fade-in-enter","enter-active-class":"fade-in-active","leave-class":"fade-out-enter","leave-active-class":"fade-out-active"}},[o("div",{ref:"dialogMainModalRef",class:!0===t.isModal?"dialogMainModal":"dialogMain",style:"width:"+(!0===t.isModal?t.boxWidth+32:t.boxWidth)+"px"},[o("div",{staticClass:"toolMain"},[!0===t.isModal?o("div",{staticClass:"tool-title"},[t._v("\n                图片裁剪\n                "),o("span",{staticClass:"closeIcon",on:{click:t.handleClose}},[t._v("×")])]):t._e(),t._v(" "),o("div",{ref:"toolBox",staticClass:"toolBox",style:"height:"+t.boxHeight+"px;width:"+t.boxWidth+"px",on:{mousemove:t.controlBtnMouseMove,mouseup:t.controlBtnMouseUp,mouseleave:t.controlBtnMouseUp}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.drawImg.img&&!0===t.showChooseBtn,expression:"!drawImg.img && showChooseBtn===true"}],staticClass:"tips"},[o("div",{staticClass:"btn btn-warning btn-xs",on:{click:t.chooseImg}},[t._v(t._s(t.label))])]),t._v(" "),1==t.tool?o("div",{directives:[{name:"show",rawName:"v-show",value:this.drawImg.img&&!0!==t.dropImg.active&&1==t.controlBox.disable&&1==t.toolBox.disable,expression:"this.drawImg.img && dropImg.active!==true && controlBox.disable==true && toolBox.disable==true"}],staticClass:"dockMain",style:"background:"+this.toolBgc,on:{mouseenter:t.dropImgOff}},[t.rate?o("div",{staticClass:"dockBtn"},[t._t("ratio",[t._v("\n                      Ratio:\n                    ")]),t._v("\n                    "+t._s(t.rate)+"\n                  ")],2):t._e(),t._v(" "),o("div",{staticClass:"dockBtn",on:{click:t.scaleReset}},[t._t("scaleReset",[t._v("\n                      Scale:\n                    ")]),t._v("\n                    "+t._s(t.drawImg.swidth>0?(t.drawImg.width/t.drawImg.swidth).toFixed(2):"-")+"\n                  ")],2),t._v(" "),!1===t.originalGraph?o("div",{staticClass:"dockBtn",on:{click:function(e){return t.turnImg(-90)}}},[t._t("turnLeft",[t._v("\n                      ↳\n                    ")])],2):t._e(),t._v(" "),!1===t.originalGraph?o("div",{staticClass:"dockBtn",on:{click:function(e){return t.turnImg(90)}}},[t._t("turnRight",[t._v("\n                      ↲\n                    ")])],2):t._e(),t._v(" "),!1===t.originalGraph?o("div",{staticClass:"dockBtn",on:{click:function(e){return t.turnReset()}}},[t._t("reset",[t._v("\n                      ↻\n                    ")])],2):t._e(),t._v(" "),!1===t.originalGraph?o("div",{staticClass:"dockBtnScrollBar"},[o("div",{ref:"dockBtnScrollControl",staticClass:"scrollBarControl",style:"left:"+t.rotateControl.position+"px",on:{mousemove:t.scrollBarControlMove,mousedown:t.scrollBarControlOn,mouseleave:t.scrollBarControlOff,mouseup:t.scrollBarControlOff}}),t._v(" "),1==t.rotateControl.active?o("div",{staticClass:"scrollBarText",style:"left:"+t.rotateControl.position+"px"},[t._v("\n                      "+t._s(t.rotateImg.angle.toFixed(0)+"°")+"\n                    ")]):t._e()]):t._e(),t._v(" "),!1===t.originalGraph?o("div",{staticClass:"dockBtn",on:{click:t.flipHorizontal}},[t._t("flipHorizontal",[t._v("\n                      ⇆\n                    ")])],2):t._e(),t._v(" "),!1===t.originalGraph?o("div",{staticClass:"dockBtn",on:{click:t.flipVertically}},[t._t("turnRight",[t._v("\n                      ⇅\n                    ")])],2):t._e()]):t._e(),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:null!=t.drawImg.img,expression:"drawImg.img!=null"}],ref:"toolBoxControl",staticClass:"toolBoxControl",on:{mousedown:t.toolBoxMouseDown,mouseup:t.toolBoxMouseUp,mousemove:t.toolBoxMouseMove,mouseleave:t.toolBoxMouseLeave}},[o("div",{staticClass:"toolBoxControlBox"},[o("div",{staticClass:"controlBox"},[o("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineTop"}),t._v(" "),o("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineBottom"}),t._v(" "),o("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineLeft"}),t._v(" "),o("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineRight"}),t._v(" "),!1===t.originalGraph?o("div",{staticClass:"selectArea"},[t._v("\n                        宽:"+t._s(t.toolBox.width)+" 高:"+t._s(t.toolBox.height)+"\n                        (x:"+t._s(t.toolBoxPosition.x)+",y:"+t._s(t.toolBoxPosition.y)+")\n                      ")]):t._e(),t._v(" "),!0===t.originalGraph?o("div",{staticClass:"selectArea"},[t._v("\n                        宽:"+t._s((t.toolBox.width/(t.drawImg.width/t.drawImg.swidth)).toFixed(0))+" 高:"+t._s((t.toolBox.height/(t.drawImg.width/t.drawImg.swidth)).toFixed(0))+"\n                        (x:"+t._s(t.toolBoxPosition.x)+",y:"+t._s(t.toolBoxPosition.y)+")\n                      ")]):t._e(),t._v(" "),!0===t.sizeChange?o("div",{staticClass:"leftUp controlBtn",attrs:{"data-name":"leftUp"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"leftUp")}}}):t._e(),t._v(" "),!0===t.sizeChange?o("div",{staticClass:"leftDown controlBtn",attrs:{"data-name":"leftDown"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"leftDown")}}}):t._e(),t._v(" "),!0===t.sizeChange?o("div",{staticClass:"rightUp controlBtn",attrs:{"data-name":"rightUp"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"rightUp")}}}):t._e(),t._v(" "),!0===t.sizeChange?o("div",{staticClass:"rightDown controlBtn",attrs:{"data-name":"rightDown"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"rightDown")}}}):t._e(),t._v(" "),!0===t.sizeChange&&!t.rate&&this.toolBox.width>20?o("div",{staticClass:"topCenter controlBtn",attrs:{"data-name":"topCenter"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"topCenter")}}}):t._e(),t._v(" "),!0===t.sizeChange&&!t.rate&&this.toolBox.width>20?o("div",{staticClass:"downCenter controlBtn",attrs:{"data-name":"downCenter"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"downCenter")}}}):t._e(),t._v(" "),!0===t.sizeChange&&!t.rate&&this.toolBox.height>20?o("div",{staticClass:"leftCenter controlBtn",attrs:{"data-name":"leftCenter"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"leftCenter")}}}):t._e(),t._v(" "),!0===t.sizeChange&&!t.rate&&this.toolBox.height>20?o("div",{staticClass:"rightCenter controlBtn",attrs:{"data-name":"rightCenter"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"rightCenter")}}}):t._e()]),t._v(" "),o("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-1"}),t._v(" "),o("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-2"}),t._v(" "),o("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-3"}),t._v(" "),o("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-4"})])]),t._v(" "),o("div",{staticClass:"copyright"},[t.DoNotDisplayCopyright?t._e():o("a",{attrs:{target:"_blank",href:"https://github.com/acccccccb/vue-img-cutter",rel:"nofollow"}},[t._v("vue-img-cutter "+t._s(t.version))])]),t._v(" "),o("canvas",{ref:"canvasSelectBox",staticClass:"canvasSelectBox",attrs:{width:t.boxWidth,height:t.boxHeight},on:{mousedown:t.dropImgOn,mouseup:t.dropImgOff,mousemove:t.dropImgMove}}),t._v(" "),o("canvas",{ref:"canvas",staticClass:"canvas",attrs:{width:t.boxWidth,height:t.boxHeight}})])]),t._v(" "),o("div",{staticClass:"i-dialog-footer"},[o("input",{ref:"inputFile",staticStyle:{width:"1px",height:"1px",border:"none",opacity:"0"},attrs:{type:"file",accept:"image/gif, image/jpeg ,image/png"},on:{change:t.putImgToCanv}}),t._v(" "),o("span",{on:{click:t.chooseImg}},[t._t("choose",[!0===t.showChooseBtn?o("div",{staticClass:"btn btn-primary btn-primary-plain"},[t._v(t._s(t.label))]):t._e()])],2),t._v(" "),o("div",{staticClass:"btn-group fr"},[o("span",{on:{click:t.handleClose}},[t._t("cancel",[o("button",{staticClass:"btn btn-default",attrs:{type:"button"}},[t._v("取消")])])],2),t._v(" "),o("span",{on:{click:function(e){return t.cropPicture(!1)}}},[t._t("confirm",[o("button",{staticClass:"btn btn-primary",staticStyle:{"margin-left":"15px"},attrs:{type:"button",disabled:!t.drawImg.img}},[t._v("确定")])])],2)])])])]),t._v(" "),o("div",{staticStyle:{clear:"both"}})],1):t._e()]):t._e()])],1)},staticRenderFns:[]};var c=o("C7Lr")(h,d,!1,function(t){o("f1Nb")},"data-v-b09dcefa",null).exports;e.a=c},HjG9:function(t,e,o){"use strict";var i={props:{tableType:{type:String,defatult:""},pictLoading:{type:Boolean,default:!1},tableData:{type:Array,default:function(){return[]}},tableBarList:{type:Array,default:function(){return[]}}},methods:{exportExcel:function(t,e,i){var a=this;this.tableData.length?o.e(5).then(o.bind(null,"zWO4")).then(function(o){var s=a.tableData,r=a._formatJson(e,s);o.export_json_to_excel({header:t,data:r,filename:i})}):this.$message({message:"Please select at least one item",type:"warning"})},_formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})}}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:this.pictLoading,expression:"pictLoading"}],staticStyle:{width:"100%"},attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中","element-loading-spinner":"el-icon-loading",stripe:!0,border:!0,data:this.tableData,"highlight-current-row":""}},this._l(this.tableBarList,function(t,o){return e("el-table-column",{key:o,attrs:{type:t.type,property:t.property,label:t.label,width:t.width}})}),1)},staticRenderFns:[]};var s=o("C7Lr")(i,a,!1,function(t){o("19Sw")},"data-v-cb3c2daa",null);e.a=s.exports},PSPz:function(t,e,o){"use strict";var i={props:{total:{type:Number,default:0}},methods:{_handleCurrentChange:function(t){this.$emit("handleCurrentChange",t)},_handleSizeChange:function(t){this.$emit("handleSizeChange",t)}}},a={render:function(){var t=this.$createElement;return(this._self._c||t)("el-pagination",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{"page-sizes":[10,20,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:this.total},on:{"size-change":this._handleSizeChange,"current-change":this._handleCurrentChange}})},staticRenderFns:[]};var s=o("C7Lr")(i,a,!1,function(t){o("nN7r")},"data-v-507fe0ea",null);e.a=s.exports},RMxb:function(t,e){},f1Nb:function(t,e){},lJCp:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("4YfN"),a=o.n(i),s=o("a3Yh"),r=o.n(s),n=o("PSPz"),l=o("HjG9"),h=o("9Vkk"),d=o("vMJZ"),c=o("xT6B"),g=o("fUgm"),m={data:function(){var t;return t={imgUrl:"",dialogVisible:!1,user:{username:"",depart:"Te"},valueDate:"",options:[{label:"Te",value:1},{label:"Re",value:2},{label:"Pe",value:3},{label:"Ie",value:4},{label:"其他",value:0}]},r()(t,"dialogVisible",!1),r()(t,"pictLoading",!1),r()(t,"tableData",[]),r()(t,"currentPage",1),r()(t,"pageSize",10),r()(t,"userNum",""),r()(t,"startDate",""),r()(t,"total",0),r()(t,"endDate",""),r()(t,"tableBarList",[{label:"序號",width:"200px",type:"index"},{property:"username",label:"姓名"},{property:"depart",label:"部門"},{property:"createTime",label:"創建時間"},{property:"auth",label:"權限"}]),t},computed:a()({},Object(g.b)(["isLogin","userInfo"])),methods:{addUser:function(){var t=this;if(this.loading=!0,!this.isLogin)return this.$message({message:"請登錄!",type:"warning"}),void(this.dialogVisible=!1);this.user.username?"root"!=this.userInfo.username?this.$message({message:"无权限!",type:"warning"}):Object(d.a)(this.user).then(function(e){t.loading=!1,e.data?"exist"===e.data?t.$message({message:"此用戶名已存在!",type:"warning"}):(t.$message({message:"新增成功!",type:"success"}),t.dialogVisible=!1,t._search()):(t.$message({message:"token过期请退出重新登录!",type:"error"}),t.dialogVisible=!1)}):(this.loading=!1,this.$message({message:"請輸入新增用戶名!",type:"warning"}))},cutDown:function(t){this.imgUrl=t.dataURL},_addItem:function(){this.dialogVisible=!0},_search:function(){var t=this;this.pictLoading=!0,Object(d.b)().then(function(e){e.data.forEach(function(t){t.createTime=Object(c.a)(t.createTime)}),t.tableData=e.data,t.pictLoading=!1})},_exportExcel:function(){this.$refs.doorTable.exportExcel(["工號","姓名","部門代碼","部門名稱","申請時間","休假時數","休假開始時間","休假結束時間","休假類別","請假原因"],["userNo","userName","deptNo","deptName","applyDate","absenceHours","startTime","endTime","absenceName","reason"],"休假記錄表")},handleSizeChange:function(t){this.currentPage=1,this.pageSize=t,this._search()},handleCurrentChange:function(t){this.currentPage=t,this._search()}},mounted:function(){this._search()},components:{BasePagination:n.a,DataTable:l.a,ImgCutter:h.a}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"10px"}},[o("div"),t._v(" "),o("div",[o("el-button",{staticClass:"exportExcel",staticStyle:{"margin-right":"20px","text-align":"right",background:"#77A1D3"},attrs:{type:"primary",icon:"el-icon-download"},on:{click:t._exportExcel}},[t._v("導出Excel")]),t._v(" "),"root"===t.userInfo.username?o("el-button",{staticClass:"exportExcel",staticStyle:{"margin-right":"20px","text-align":"right",background:"#20BDFF"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t._addItem}},[t._v("新增人員")]):t._e(),t._v(" "),o("el-button",{staticStyle:{background:"#3CA55C"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t._search}},[t._v("搜索")])],1)]),t._v(" "),o("DataTable",{ref:"doorTable",attrs:{tableData:t.tableData,pictLoading:t.pictLoading,tableBarList:t.tableBarList}}),t._v(" "),t.tableData.length?o("BasePagination",{attrs:{total:t.total},on:{handleCurrentChange:t.handleCurrentChange,handleSizeChange:t.handleSizeChange}}):t._e(),t._v(" "),o("el-dialog",{attrs:{title:"新增用戶  (非root用戶密碼均是msic@123)","close-on-click-modal":!1,visible:t.dialogVisible,width:"400px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("div",{staticStyle:{display:"flex","align-items":"center"}},[o("span",{staticClass:"title"},[t._v("崗位 :")]),o("el-select",{staticStyle:{width:"100%"},attrs:{clearable:!0},model:{value:t.user.depart,callback:function(e){t.$set(t.user,"depart",e)},expression:"user.depart"}},t._l(t.options,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),o("div",{staticStyle:{display:"flex","margin-top":"20px"}},[o("span",{staticClass:"title"},[t._v("用戶名:")]),o("el-input",{attrs:{placeholder:"用戶名"},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),t._v(" "),o("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.addUser}},[t._v("新增")])],1)],1)},staticRenderFns:[]};var p=o("C7Lr")(m,u,!1,function(t){o("RMxb")},"data-v-d0391434",null);e.default=p.exports},nN7r:function(t,e){},xT6B:function(t,e,o){"use strict";e.a=function(t){var e=t.indexOf("T"),o=t.indexOf("Z"),i=t.substr(0,e),a=t.substr(e+1,o-e-1),s=i+" "+a,r=28800+(r=(r=(r=new Date(Date.parse(s))).getTime())/1e3);return new Date(1e3*parseInt(r)).toLocaleString().replace(/年|月/g,"-").replace(/日/g," ")}}});
//# sourceMappingURL=1.90f00e81cad8c8e92057.js.map